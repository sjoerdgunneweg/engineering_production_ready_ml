"use strict";(self.webpackChunkgrafana_metricsdrilldown_app=self.webpackChunkgrafana_metricsdrilldown_app||[]).push([[768],{4768:(e,t,r)=>{r.r(t),r.d(t,{default:()=>v});var n=r(8531),i=r(5959),a=r.n(i),o=r(2993),c=r(8732),l=r(1522),s=r(5333),d=r(4757),m=r(8705),u=r(5935),f=r(7616),p=r(396),g=r(3781),h=r(4787);function w(e){const t=e.match(/^([a-zA-Z0-9]+)/);return t?t[1]:e}const v=({query:e,initialStart:t,initialEnd:r,dataSource:v,sourceMetrics:S})=>{const[_]=(0,l.n)(),E=(0,i.useRef)(!1),b=S&&S.length>0;(0,i.useEffect)(()=>{E.current||(E.current=!0,(0,u.z)("exposed_component_viewed",{component:"knowledge_graph_source_metrics"}))},[]);const k=(0,g.$9)(e);let $,y;if(b)y=S[0].labels.map(e=>(0,p.Do)(e));else{if(!k){const t=new Error("Missing metric information for Knowledge Graph insight");return m.v.error(t,{query:e}),a().createElement(o.E,{error:t})}$=k.metric,y=k.labels.map(e=>(0,p.Do)(e))}const D=["asserts","ALERTS"],M=b?function(e){const t=new Set(e.map(w));return Array.from(t)}(S.map(e=>e.metricName)).filter(e=>D.every(t=>!e.startsWith(t))):void 0;if(null==M?void 0:M.length){const e=`${f.mc}-${d.G.prefix}`;n.locationService.partial({[e]:M.join(",")},!0);const t=`${f.mc}-var-${s.NJ}`;n.locationService.partial({[t]:"alphabetical"},!0)}const R=(0,f.ef)({metric:$,initialDS:v.uid,initialFilters:y,$timeRange:(0,h._)(t,r),embedded:!0});return a().createElement("div",{"data-testid":"metrics-drilldown-embedded-label-breakdown"},_?a().createElement(o.E,{error:_}):a().createElement(c.X,{trail:R}))}},4787:(e,t,r)=>{r.d(t,{_:()=>o});var n=r(7781),i=r(3014);function a(e){return"string"==typeof e&&n.dateMath.isMathString(e)?e:n.dateMath.toDateTime(new Date(e),{roundUp:!1}).toISOString()}function o(e,t){return new i.SceneTimeRange({from:a(e),to:a(t)})}}}]);
//# sourceMappingURL=768.js.map?_cache=10c4338cfa5ec24acf8b